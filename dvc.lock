schema: '2.0'
stages:
  prepare:
    cmd: python3.11 -m a_guide_to_mlops.prepare data/raw data/prepared
    deps:
    - path: a_guide_to_mlops/prepare.py
      hash: md5
      md5: 8b52ed68fee3f0275dbbd48f66abed72
      size: 3014
    - path: data/raw
      hash: md5
      md5: 6d8f0c274829764e1ea1112420825014.dir
      size: 8822930
      nfiles: 1605
    params:
      params.yaml:
        prepare:
          seed: 77
          split: 0.2
          image_size:
          - 32
          - 32
          grayscale: true
    outs:
    - path: data/prepared
      hash: md5
      md5: 5da2804789b136a7119a33caa23cf022.dir
      size: 6619331
      nfiles: 8
  train:
    cmd: python3.11 src/train.py data/prepared model
    deps:
    - path: data/prepared
      hash: md5
      md5: 1b40991601905d02dc7f7d9352ad6c19.dir
      size: 6750059
      nfiles: 8
    - path: src/train.py
      hash: md5
      md5: f0c533685de7ddb3f8a8d9d4c221747e
      size: 3856
    - path: src/utils/seed.py
      hash: md5
      md5: 963a551c177450f50e4f11bd1a9ab2c7
      size: 437
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model
      hash: md5
      md5: 2ad22e626372cc73cb45bbc116e40604.dir
      size: 8281156
      nfiles: 2
  evaluate:
    cmd: python3.11 src/evaluate.py model data/prepared
    deps:
    - path: model
      hash: md5
      md5: 2ad22e626372cc73cb45bbc116e40604.dir
      size: 8281156
      nfiles: 2
    - path: src/evaluate.py
      hash: md5
      md5: ed775b26fb8d8b7d91f99e83ca8c42f9
      size: 5480
    outs:
    - path: evaluation/metrics.json
      hash: md5
      md5: 32cd89a34ba9c599b064b063e68b0e7d
      size: 62
    - path: evaluation/plots/confusion_matrix.png
      hash: md5
      md5: 8f511b3672df3878ac3784b8603556be
      size: 46883
    - path: evaluation/plots/pred_preview.png
      hash: md5
      md5: 6d1db42e2f4697538b54d985f7bfe211
      size: 45767
    - path: evaluation/plots/training_history.png
      hash: md5
      md5: d6309a5222da361dd56375412344a79b
      size: 37109
  baseline_train:
    cmd: python3.11 -m a_guide_to_mlops.train.baseline.train data/prepared model/baseline
    deps:
    - path: a_guide_to_mlops/train/baseline/train.py
      hash: md5
      md5: ef00ad3e24c5e4848260f5020b3f2d3f
      size: 4201
    - path: data/prepared
      hash: md5
      md5: 5da2804789b136a7119a33caa23cf022.dir
      size: 6619331
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/baseline/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 15a136d7d5670a6484213102e03a038e
      size: 8378580
  ptq_dynamic_train:
    cmd: python3.11 -m a_guide_to_mlops.train.ptq.train_ptq_dynamic data/prepared
      model/ptq/dynamic
    deps:
    - path: a_guide_to_mlops/train/ptq/train_ptq_dynamic.py
      hash: md5
      md5: 652932084a59f18ca0935edd866190ad
      size: 4783
    - path: data/prepared
      hash: md5
      md5: 5da2804789b136a7119a33caa23cf022.dir
      size: 6619331
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/ptq/dynamic/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 55fd9c35395a62885e2fc6696f6e1a4d
      size: 8376436
  ptq_float16_train:
    cmd: python3.11 -m a_guide_to_mlops.train.ptq.train_ptq_float16 data/prepared
      model/ptq/float16
    deps:
    - path: a_guide_to_mlops/train/ptq/train_ptq_float16.py
      hash: md5
      md5: c5953fcfc1bf94141331b0c07ed578dd
      size: 4459
    - path: data/prepared
      hash: md5
      md5: 5da2804789b136a7119a33caa23cf022.dir
      size: 6619331
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/ptq/float16/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 02f24135b551c4d30e79be4e253d4fe8
      size: 8374824
  ptq_integer_train:
    cmd: python3.11 -m a_guide_to_mlops.train.ptq.train_ptq_integer data/prepared
      model/ptq/integer
    deps:
    - path: a_guide_to_mlops/train/ptq/train_ptq_integer.py
      hash: md5
      md5: 315bd63d76e9f4f7baae57f6acfa0102
      size: 5500
    - path: data/prepared
      hash: md5
      md5: 5da2804789b136a7119a33caa23cf022.dir
      size: 6619331
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/ptq/integer/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 7414f36321737d890c3bb5c41ef8cb69
      size: 8370752
  qat_dynamic_train:
    cmd: python3.11 a_guide_to_mlops/train/qat/train_qat_dynamic.py data/prepared
      model/qat/dynamic
    deps:
    - path: a_guide_to_mlops/train/qat/train_qat_dynamic.py
      hash: md5
      md5: da752ce1695528254e5831973c974d69
      size: 7039
    - path: data/prepared
      hash: md5
      md5: e7fa400ac83a7577a990a6500e723792.dir
      size: 6750061
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/qat/dynamic/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: c6f50c6f8e973a4b1c746725bb2d88f8
      size: 594456
  qat_float16_train:
    cmd: python3.11 a_guide_to_mlops/train/qat/train_qat_float16.py data/prepared
      model/qat/float16
    deps:
    - path: a_guide_to_mlops/train/qat/train_qat_float16.py
      hash: md5
      md5: 69608030da762c69b501e249a23889cf
      size: 6839
    - path: data/prepared
      hash: md5
      md5: e7fa400ac83a7577a990a6500e723792.dir
      size: 6750061
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/qat/float16/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 56a4997dc3d43c87a66fd4bf835c82b8
      size: 594460
  qat_integer_train:
    cmd: python3.11 a_guide_to_mlops/train/qat/train_qat_integer.py data/prepared
      model/qat/integer
    deps:
    - path: a_guide_to_mlops/train/qat/train_qat_integer.py
      hash: md5
      md5: fd502f9ba8c94a5bcc805e2ba1ae8286
      size: 5975
    - path: data/prepared
      hash: md5
      md5: e7fa400ac83a7577a990a6500e723792.dir
      size: 6750061
      nfiles: 8
    params:
      params.yaml:
        train:
          seed: 77
          lr: 0.001
          epochs: 10
          conv_size: 64
          dense_size: 128
          output_classes: 11
    outs:
    - path: model/qat/integer/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 9dcca938b1070e6322f2f9cf3e935263
      size: 677172
  evaluate_baseline:
    cmd: python3.11 -m a_guide_to_mlops.evaluate model/baseline data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: a420e1698a6b452ef4ba3c5abdec7541
      size: 6096
    - path: model/baseline/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 15a136d7d5670a6484213102e03a038e
      size: 8378580
    outs:
    - path: evaluation/baseline/metrics.json
      hash: md5
      md5: 6b5d7bd430983bd05c2081badf0fad03
      size: 61
    - path: evaluation/baseline/plots/confusion_matrix.png
      hash: md5
      md5: 76f833e78578343f9a046609f8c407db
      size: 44250
    - path: evaluation/baseline/plots/pred_preview.png
      hash: md5
      md5: fe53070d35db771ccf5254160a58e7c2
      size: 43555
    - path: evaluation/baseline/plots/training_history.png
      hash: md5
      md5: 2dc64566f48279db33cd8d7056910dbb
      size: 37303
  evaluate_ptq_dynamic:
    cmd: python3.11 -m a_guide_to_mlops.evaluate model/ptq/dynamic data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: a420e1698a6b452ef4ba3c5abdec7541
      size: 6096
    - path: model/ptq/dynamic/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 55fd9c35395a62885e2fc6696f6e1a4d
      size: 8376436
    outs:
    - path: evaluation/ptq/dynamic/metrics.json
      hash: md5
      md5: 6b5d7bd430983bd05c2081badf0fad03
      size: 61
    - path: evaluation/ptq/dynamic/plots/confusion_matrix.png
      hash: md5
      md5: 76f833e78578343f9a046609f8c407db
      size: 44250
    - path: evaluation/ptq/dynamic/plots/pred_preview.png
      hash: md5
      md5: fe53070d35db771ccf5254160a58e7c2
      size: 43555
    - path: evaluation/ptq/dynamic/plots/training_history.png
      hash: md5
      md5: 2dc64566f48279db33cd8d7056910dbb
      size: 37303
  evaluate_ptq_float16:
    cmd: python3.11 -m a_guide_to_mlops.evaluate model/ptq/float16 data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: a420e1698a6b452ef4ba3c5abdec7541
      size: 6096
    - path: model/ptq/float16/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 02f24135b551c4d30e79be4e253d4fe8
      size: 8374824
    outs:
    - path: evaluation/ptq/float16/metrics.json
      hash: md5
      md5: 6b5d7bd430983bd05c2081badf0fad03
      size: 61
    - path: evaluation/ptq/float16/plots/confusion_matrix.png
      hash: md5
      md5: 76f833e78578343f9a046609f8c407db
      size: 44250
    - path: evaluation/ptq/float16/plots/pred_preview.png
      hash: md5
      md5: fe53070d35db771ccf5254160a58e7c2
      size: 43555
    - path: evaluation/ptq/float16/plots/training_history.png
      hash: md5
      md5: 2dc64566f48279db33cd8d7056910dbb
      size: 37303
  evaluate_ptq_integer:
    cmd: python3.11 -m a_guide_to_mlops.evaluate model/ptq/integer data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: a420e1698a6b452ef4ba3c5abdec7541
      size: 6096
    - path: model/ptq/integer/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 7414f36321737d890c3bb5c41ef8cb69
      size: 8370752
    outs:
    - path: evaluation/ptq/integer/metrics.json
      hash: md5
      md5: 6b5d7bd430983bd05c2081badf0fad03
      size: 61
    - path: evaluation/ptq/integer/plots/confusion_matrix.png
      hash: md5
      md5: 76f833e78578343f9a046609f8c407db
      size: 44250
    - path: evaluation/ptq/integer/plots/pred_preview.png
      hash: md5
      md5: fe53070d35db771ccf5254160a58e7c2
      size: 43555
    - path: evaluation/ptq/integer/plots/training_history.png
      hash: md5
      md5: 2dc64566f48279db33cd8d7056910dbb
      size: 37303
  evaluate_qat_dynamic:
    cmd: python3.11 a_guide_to_mlops/evaluate.py model/qat/dynamic data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: 142916c3e1430ecffc2c73dfdc8824b3
      size: 7231
    - path: model/qat/dynamic/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: c6f50c6f8e973a4b1c746725bb2d88f8
      size: 594456
    outs:
    - path: evaluation/qat/dynamic/metrics.json
      hash: md5
      md5: b9864b581c7dcbd1a305583c7ab0a2ed
      size: 63
    - path: evaluation/qat/dynamic/plots/confusion_matrix.png
      hash: md5
      md5: 538eebde289a063837375e9ea893decb
      size: 41727
    - path: evaluation/qat/dynamic/plots/pred_preview.png
      hash: md5
      md5: 6d1db42e2f4697538b54d985f7bfe211
      size: 45767
    - path: evaluation/qat/dynamic/plots/training_history.png
      hash: md5
      md5: 0721d8a2cfcbf05ca83130ffd237e614
      size: 37903
  evaluate_qat_float16:
    cmd: python3.11 a_guide_to_mlops/evaluate.py model/qat/float16 data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: 142916c3e1430ecffc2c73dfdc8824b3
      size: 7231
    - path: model/qat/float16/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 56a4997dc3d43c87a66fd4bf835c82b8
      size: 594460
    outs:
    - path: evaluation/qat/float16/metrics.json
      hash: md5
      md5: b9864b581c7dcbd1a305583c7ab0a2ed
      size: 63
    - path: evaluation/qat/float16/plots/confusion_matrix.png
      hash: md5
      md5: 538eebde289a063837375e9ea893decb
      size: 41727
    - path: evaluation/qat/float16/plots/pred_preview.png
      hash: md5
      md5: 6d1db42e2f4697538b54d985f7bfe211
      size: 45767
    - path: evaluation/qat/float16/plots/training_history.png
      hash: md5
      md5: 0721d8a2cfcbf05ca83130ffd237e614
      size: 37903
  evaluate_qat_integer:
    cmd: python3.11 a_guide_to_mlops/evaluate.py model/qat/integer data/prepared
    deps:
    - path: a_guide_to_mlops/evaluate.py
      hash: md5
      md5: 142916c3e1430ecffc2c73dfdc8824b3
      size: 7231
    - path: model/qat/integer/celestial_bodies_classifier_model.bentomodel
      hash: md5
      md5: 9dcca938b1070e6322f2f9cf3e935263
      size: 677172
    outs:
    - path: evaluation/qat/integer/metrics.json
      hash: md5
      md5: b9864b581c7dcbd1a305583c7ab0a2ed
      size: 63
    - path: evaluation/qat/integer/plots/confusion_matrix.png
      hash: md5
      md5: 538eebde289a063837375e9ea893decb
      size: 41727
    - path: evaluation/qat/integer/plots/pred_preview.png
      hash: md5
      md5: 6d1db42e2f4697538b54d985f7bfe211
      size: 45767
    - path: evaluation/qat/integer/plots/training_history.png
      hash: md5
      md5: 0721d8a2cfcbf05ca83130ffd237e614
      size: 37903
